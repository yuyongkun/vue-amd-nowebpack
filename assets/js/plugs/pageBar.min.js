define(["jquery","common"],function(a,b){function c(a,b,c,d){this.currentPage=a,this.totalPage=b,this.wrapHtm=c,this.callBackFun=d,this.initPageBar()}return c.prototype.initPageBar=function(){var b="",d=1,e=5;for(d=this.currentPage<=3?0:this.currentPage==this.totalPage?this.totalPage-(this.wrapHtm.find("ul li").length-4):this.currentPage>=4&&this.currentPage+2<=this.totalPage?this.currentPage-3:Number(this.wrapHtm.find(".prev").next().text())-1,this.totalPage<e&&(e=this.totalPage);e>0&&!(e<=0);)e--,d++,b+=d==this.currentPage?'<li class="active">'+d+"</li>":"<li>"+d+"</li>";var f='<ul style="margin: 8px 0; text-align: center;"><li class="first">&lt;&lt;</li><li class="prev">&lt;</li>'+b+'<li class="next">&gt;</li><li class="end">&gt;&gt;</li></ul>';this.wrapHtm.html(f),this.wrapHtm.find("ul li").css({display:"inline-block",padding:"6px 20px","margin-right":"2px","background-color":"#f2f2f2",border:"1px solid #dddddd",cursor:"pointer"}),this.wrapHtm.find("ul li").bind("mouseenter mouseleave",function(a){this.className.indexOf("active")==-1&&("mouseenter"==a.type?this.style.backgroundColor="#e6e6e6":this.style.backgroundColor="#f2f2f2")}),this.wrapHtm.find("ul li.active").css("background-color","#ddd"),this.wrapHtm.find("ul li").unbind("click").bind("click",a.proxy(c.prototype.tapPage,this))},c.prototype.tapPage=function(c){var d=c.target.className;if("active"!=d){if("first"==d){if(1==this.currentPage)return void b.msg.warning("已经是首页了");this.currentPage=1}else if("end"==d){if(this.currentPage==this.totalPage)return void b.msg.warning("已经是最后一页");this.currentPage=this.totalPage}else if("prev"==d){if(1==this.currentPage)return void b.msg.warning("已经是首页了");this.currentPage--}else if("next"==d){if(this.currentPage==this.totalPage)return void b.msg.warning("已经是最后一页");this.currentPage++}else a(c.target).siblings("li").removeClass("active"),a(c.target).addClass("active"),this.currentPage=Number(c.target.innerText);this.initPageBar(),this.callBackFun&&this.callBackFun(this.currentPage)}},c});
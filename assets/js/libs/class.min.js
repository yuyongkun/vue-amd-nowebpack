define(function(){Object.keys||(Object.keys=function(e){var f=[],d;for(d in e)Object.prototype.hasOwnProperty.call(e,d)&&f.push(d);return f});var k=function(){function e(a){if(!a)return[];if("toArray"in Object(a))return a.toArray();for(var b=a.length||0,c=Array(b);b--;)c[b]=a[b];return c}function f(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(){}var l=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();return{create:function(){function a(){this.initialize.apply(this,
arguments)}var b=null,c=e(arguments);"[object Function]"===Object.prototype.toString.call(c[0])&&(b=c.shift());f(a,k.Methods);a.superclass=b;a.subclasses=[];b&&(d.prototype=b.prototype,a.prototype=new d,b.subclasses.push(a));for(var b=0,m=c.length;b<m;b++)a.addMethods(c[b]);a.prototype.initialize||(a.prototype.initialize=Prototype.emptyFunction);return a.prototype.constructor=a},extend:f,Methods:{addMethods:function(a){var b=this.superclass&&this.superclass.prototype,c=Object.keys(a);l&&(a.toString!=
Object.prototype.toString&&c.push("toString"),a.valueOf!=Object.prototype.valueOf&&c.push("valueOf"));for(var d=0,f=c.length;d<f;d++){var e=c[d],g=a[e];if(b&&Object.isFunction(g)&&"$super"==g.argumentNames()[0]){var h=g,g=function(a){return function(){return b[a].apply(this,arguments)}}(e).wrap(h);g.valueOf=function(a){return function(){return a.valueOf.call(a)}}(h);g.toString=function(a){return function(){return a.toString.call(a)}}(h)}this.prototype[e]=g}return this}}}}();return k});